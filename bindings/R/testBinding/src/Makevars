# See Section 1.2.1 "Using 'Makevars'" of Writing R Extensions
# https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Using-Makevars

PKG_CFLAGS=
PKG_CPPFLAGS=-Iinstalled/include
PKG_LIBS=-Linstalled/lib -lKriging

# To build libKriging before
all: installed/lib/libKriging.a

$(SHLIB): installed/lib/libKriging.a

CXX_STD = CXX11

installed/lib/libKriging.a:
	rm -fr build
	mkdir -p build
	cd build \
		&& CC="$(CC)" CFLAGS="$(CFLAGS)" CC="$(CC)" CXXFLAGS="$(CXXFLAGS)" cmake \
			-DBUILD_SHARED_LIBS=off \
			-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON \
			-DCMAKE_INSTALL_PREFIX:PATH=../installed \
			../../../../.. \
		&& cmake --build . --target install